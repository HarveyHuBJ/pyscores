<html>

<head>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
            vertical-align: text-top;
        }

        th {
            background-color: #f2f2f2;
        }
        a:hover {color: #0000FF;}
        a{text-decoration: none;}

        /* 设置 ul 的样式 */
        ul.list {
            display: flex;        /* 使用 flex 布局 */
            flex-wrap: wrap;      /* 允许换行 */
            justify-content: flex-start; /* 左对齐 */
            list-style-type: none; /* 移除默认的项目符号 */
            padding: 0;           /* 移除默认的内边距 */
            margin: 0;            /* 移除默认的外边距 */
        }

        /* 设置 li 的样式 */
        ul.list li {
            margin-right: 10px;   /* 右侧间距 */
            margin-bottom: 10px;  /* 下侧间距 */
        }

        div.h3 {
            font-size: 20px;
            font-weight: bold;
            padding-left: 40px;
            text-align: left;
        }

        h1 {
            text-align: center;
        }
        span.name{font-size: 12px;}
        span.level{ display: inline-block; width: 22px; margin-right: 12px; }
        span.class_a{background-color:#d4220e;}
        span.class_b{background-color:#ef8b43;}
        span.class_c{background-color:#f3c632;}
        span.class_d{background-color:#90f36f;}
        span.class_f{background-color:#055c23;}

        hr{ height: 2; }
        .width10p{width:10%;} 
        .alignCenter{text-align: center;}
    </style>
    <base target="_blank">
</head>

<body>
    <h1>{{title}}-班级报告</h1>

    <div class="h3">各科分数统计</div>
    <table>
        <tr>
            <th class="width10p">班级</th>
            <td colspan='5'>{{class_name}}</td>
        </tr>
        <tr>
            <th>学生人数</th>
            <td colspan='5'>{{student_amount}}</td>
        </tr>
        <tr>
            <th>科目</th>
            <th>平均分</th>
            <th>最高分</th>
            <th>最低分</th>
            <th>中位数</th>
            <th>标准差</th>
        </tr>

        {% for item in subject_scores %}
        <tr>
            <th>{{item.subject}}</th>
            <td>{{item.average_score | round(2)}}</td>
            <td>{{item.top_score| round(2)}}</td>
            <td>{{item.bottom_score| round(2)}}</td>
            <td>{{item.median_score| round(2)}}</td>
            <td>{{item.stderr| round(2)}}</td>
        </tr>
        {% endfor %}
 
    </table>
    <hr/>

    <div class="h3">主课成绩排名</div>
    <table>
        <tr>
            <th class="width10p">班级排名</th>
            <th>学生姓名</th>
            <th>主课成绩</th>
            <th>总成绩</th>
            <th>年级排名</th> 
        </tr>
        {% for item in class_rank_students %}
        <tr>
            <td>{{item.class_rank}}</td>
            <td><a href="./{{class_name}}-{{item.student_name}}.html"> {{item.student_name}}</a></td>
            <td>{{item.score}}</td>
            <td>{{item.score_all}}</td>
            <td>{{item.grade_rank}}</td> 
        </tr>
        {% endfor%}

    </table>
    <hr/>

    <div class="h3">各科成绩分数线分布</div>
    <div class="alignCenter">
        <img src="./{{class_name}}-score-distribution.png" alt="科成绩分数线分布图"/>
    </div>
    <table>
        <tr>
            <th class="width10p">科目</th>
            <th><span class="level class_a">&nbsp;&nbsp;</span>A线学生名单</th>
            <th><span class="level class_b">&nbsp;&nbsp;</span>B线学生名单</th>
            <th><span class="level class_c">&nbsp;&nbsp;</span>C线学生名单</th>
            <th><span class="level class_d">&nbsp;&nbsp;</span>D线学生名单</th>
            <th><span class="level class_f">&nbsp;&nbsp;</span>F线学生名单</th>
        </tr>

        {% for sd in subject_distributions %}

        <tr>
            <th>{{sd.subject}}</th>
            <td>
                <div class="h3">{{sd.level_a_amount}}人</div>
                <div>
                    <ul class="list"">
                        {% for student in sd.level_a_students %}
                        <li><span class="name"><a href="./{{class_name}}-{{student.name}}.html">{{student.name}}({{student.score}})</a></span></li>
                        {% endfor %}
                    </ul>
                </div>
            </td>
            
            <td>
                <div class="h3">{{sd.level_b_amount}}人</div>
                <div>
                    <ul class="list"">
                        {% for student in sd.level_b_students %}
                        <li><span class="name"><a href="./{{class_name}}-{{student.name}}.html">{{student.name}}({{student.score}})</a></span></li>
                      
                        {% endfor %}
                    </ul>
                </div>
            </td>
            
            <td>
                <div class="h3">{{sd.level_c_amount}}人</div>
                <div>
                    <ul class="list"">
                        
                        {% for student in sd.level_c_students %}
                        <li><span class="name"><a href="./{{class_name}}-{{student.name}}.html">{{student.name}}({{student.score}})</a></span></li>
                        
                        {% endfor %}
                    </ul>
                </div>
            </td>
            
            <td>
                <div class="h3">{{sd.level_d_amount}}人</div>
                <div>
                    <ul class="list"">
                        {% for student in sd.level_d_students %}
                        <li><span class="name"><a href="./{{class_name}}-{{student.name}}.html">{{student.name}}({{student.score}})</a></span></li>
                       
                        
                        {% endfor %}
                    </ul>
                </div>
            </td>
            <td>
                <div class="h3">{{sd.level_f_amount}}人</div>
                <div>
                    <ul class="list">
                        {% for student in sd.level_f_students %}
                        <li><span class="name"><a href="./{{class_name}}-{{student.name}}.html">{{student.name}}({{student.score}})</a></span></li>
                      
                        {% endfor %}
                    </ul>
                </div>
            </td>
            
        </tr>

    {% endfor %}
         


    </table>
    <hr/>
    <div class="h3">A线科目学生统计</div>
    <table>
    {% for lst in level_a_lists %}
        <tr>
            <th class="width10p">{{lst.index}}科A线名单</th>
            <td>
                <div class="h3">{{lst.amount}}人</div>
                <div>
                    <ul class="list">
                        {% for student in lst.students %}
                        <li><span class="name"><a href="./{{class_name}}-{{student}}.html">{{student}}</a></span></li>
                        {% endfor %}
                    </ul>
                </div>
            </td>
        </tr>
    {% endfor %}    


    </table>
</body>

 